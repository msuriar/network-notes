OSPF PROTOCOL OVERVIEW [RFC 2328, RFC 1587]

OSPF is a link-state routing protocol; an open standard based on Djikstra's algorithm. It uses reliable flooding to ensure information about network topology is flooded throughout an autonomous system.

OSPF uses a single, dimensionless metric. Each interface in OSPF has a cost associated with it. The default cost as calculated by Cisco is 10^8/bandwidth. OSPF cost is an integer, so all interfaces with a speed of 100Mbps or more end up with an OSPF cost of 1.

Areas are used to provide stability and scalability, but abstracting the topology of an area away from those routers outside that area.

OSPF consists of four main components.

Hello protocol: this is used for neighbour discovery, as well as dead neighbour detection.

Adjacencies: if the parameters specified in the Hello protocol are configured correctly across both neighbours, and some other conditions are met (particularly in NBMA/broadcast networks), the neighbors will become ADJACENT. LSAs are only flooded to adjacent neighbors.

Database: the link-state database for an OSPF area is the sum of all router link states from within that area.

Flooding: LSAs (link-state advertisements) are flooded throughout an area, and summarised by area border routers.

BASIC OSPF OPERATION
Each router in an OSPF AS is considered to have one or more INTERFACES (a.k.a LINKS). Each INTERFACE is associated with an AREA. Each interface may only be configured in one area, however a router may contain interfaces in multiple areas. (See AREAS.)

Each OSPF router has a router-ID, a 32-bit integer which is used to uniquely identify a router within an OSPF AS. Normally expressed as a dotted decimal, but not subject to the same restrictions as IP addresses. By default, the highest numbered loopback interface address is used. If there are no loopback interfaces, the highest numbered physical interface address is used.

Within a single area, each router originates an LSA (link-state advertisement) detailing all its connected interfaces within that area, the cost of that interface, and the router-IDs (RIDs) of neighbours that have been discovered on each interface. On each router running OSPF, for each link within the area, Djikstra's shortest path algorithm is run with the current node as the root of the tree. Once the shortest path tree has been calculated, it is used to select one or more minimum cost route to each link (= IP prefix) as a candidate for installation in the global routing table.

AREAS
As the number of routers and links in an OSPF area increases, the CPU and memory required to maintain the link-state database and to perform SPF calculations increases. If an OSPF AS consists of a single area, all routers within the AS must be capable of maintaining the full OSPF database. Furthermore, instability in any part of the network (e.g. a flapping link/device) will result in LSAs being flooded to all routers in the AS and triggering SPF recalculations, causing CPU resource to be consumed.

OSPF attempts to address these concerns through the use of AREAS. Each router interface is associated with an OSPF area. An interface may only be part of one area, however, a router may support interfaces in multiple different areas. NOTE: if a router is configured with interfaces in multiple areas, it MUST have at least one interface in the backbone area 0.

An OSPF router maintains a separate link-state database for each area it has interfaces in.
